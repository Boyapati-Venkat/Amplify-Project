var me=Object.defineProperty;var he=(e,s,t)=>s in e?me(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var i=(e,s,t)=>he(e,typeof s!="symbol"?s+"":s,t);import{L as xe,M as X,Q as we,T as Ee,V as ve,W as ge,X as Se,Y as Pe,Z as Ce,$ as be,a0 as Ie,a1 as fe,a2 as Re,a3 as Ae,a4 as ke,a5 as ze,a6 as De,a7 as _e,a8 as Fe,a9 as $e,aa as He,ab as Oe,ac as Ue,ad as je,ae as Ne,af as Le,ag as Te,ah as Me,ai as Ge,aj as qe,ak as Be,al as Ve,am as Je,an as Ke,ao as We,ap as Qe,aq as Xe,ar as Ye,as as Ze,at as et,au as tt,av as st,aw as nt,ax as ot,ay as it,az as at,aA as rt,aB as dt,aC as ct,aD as R,aE as c,aF as Y,aG as lt,aH as pt,aI as u,aJ as ut,aK as yt,aL as Z,aM as I,aN as mt,aO as ht,aP as xt,aQ as ee,aR as te,aS as se}from"./amplify-CFvllrDD.js";const wt=async(e,s,t)=>({operation:xe(s).operation,region:await X(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Et(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function b(e){return{schemeId:"smithy.api#noAuth"}}const vt=e=>{const s=[];switch(e.operation){case"GetCredentialsForIdentity":{s.push(b());break}case"GetId":{s.push(b());break}case"GetOpenIdToken":{s.push(b());break}case"UnlinkIdentity":{s.push(b());break}default:s.push(Et(e))}return s},gt=e=>{const s=we(e);return Object.assign(s,{authSchemePreference:X(e.authSchemePreference??[])})},St=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),ne={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Pt="@aws-sdk/client-cognito-identity",Ct="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",bt="3.821.0",It={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts"},ft="./dist-cjs/index.js",Rt="./dist-types/index.d.ts",At="./dist-es/index.js",kt=!1,zt={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.821.0","@aws-sdk/credential-provider-node":"3.821.0","@aws-sdk/middleware-host-header":"3.821.0","@aws-sdk/middleware-logger":"3.821.0","@aws-sdk/middleware-recursion-detection":"3.821.0","@aws-sdk/middleware-user-agent":"3.821.0","@aws-sdk/region-config-resolver":"3.821.0","@aws-sdk/types":"3.821.0","@aws-sdk/util-endpoints":"3.821.0","@aws-sdk/util-user-agent-browser":"3.821.0","@aws-sdk/util-user-agent-node":"3.821.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.5.1","@smithy/fetch-http-handler":"^5.0.4","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.9","@smithy/middleware-retry":"^4.1.10","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.0.6","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.1","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.17","@smithy/util-defaults-mode-node":"^4.0.17","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.5","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},Dt={"@aws-sdk/client-iam":"3.821.0","@tsconfig/node18":"18.2.4","@types/chai":"^4.2.11","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},_t={node:">=18.0.0"},Ft={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},$t=["dist-*/**"],Ht={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Ot="Apache-2.0",Ut={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},jt="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",Nt={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},Lt={name:Pt,description:Ct,version:bt,scripts:It,main:ft,types:Rt,module:At,sideEffects:kt,dependencies:zt,devDependencies:Dt,engines:_t,typesVersions:Ft,files:$t,author:Ht,license:Ot,browser:Ut,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:jt,repository:Nt},oe="required",r="fn",d="argv",w="ref",T=!0,M="isSet",P="booleanEquals",x="error",y="endpoint",m="tree",A="PartitionResult",k="getAttr",g="stringEquals",G={[oe]:!1,type:"String"},q={[oe]:!0,default:!1,type:"Boolean"},B={[w]:"Endpoint"},ie={[r]:P,[d]:[{[w]:"UseFIPS"},!0]},ae={[r]:P,[d]:[{[w]:"UseDualStack"},!0]},a={},S={[w]:"Region"},V={[r]:k,[d]:[{[w]:A},"supportsFIPS"]},re={[w]:A},J={[r]:P,[d]:[!0,{[r]:k,[d]:[re,"supportsDualStack"]}]},K=[ie],W=[ae],Q=[S],Tt={version:"1.0",parameters:{Region:G,UseDualStack:q,UseFIPS:q,Endpoint:G},rules:[{conditions:[{[r]:M,[d]:[B]}],rules:[{conditions:K,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:x},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:x},{endpoint:{url:B,properties:a,headers:a},type:y}],type:m},{conditions:[{[r]:M,[d]:Q}],rules:[{conditions:[{[r]:"aws.partition",[d]:Q,assign:A}],rules:[{conditions:[ie,ae],rules:[{conditions:[{[r]:P,[d]:[T,V]},J],rules:[{conditions:[{[r]:g,[d]:[S,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:y},{conditions:[{[r]:g,[d]:[S,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:y},{conditions:[{[r]:g,[d]:[S,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:y},{conditions:[{[r]:g,[d]:[S,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:y},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:y}],type:m},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:x}],type:m},{conditions:K,rules:[{conditions:[{[r]:P,[d]:[V,T]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:y}],type:m},{error:"FIPS is enabled but this partition does not support FIPS",type:x}],type:m},{conditions:W,rules:[{conditions:[J],rules:[{conditions:[{[r]:g,[d]:["aws",{[r]:k,[d]:[re,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:y},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:y}],type:m},{error:"DualStack is enabled but this partition does not support DualStack",type:x}],type:m},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:y}],type:m}],type:m},{error:"Invalid Configuration: Missing Region",type:x}]},Mt=Tt,Gt=new ve({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),qt=(e,s={})=>Gt.get(e,()=>Ee(Mt,{endpointParams:e,logger:s.logger}));ge.aws=Se;const Bt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??Pe,base64Encoder:(e==null?void 0:e.base64Encoder)??Ce,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??qt,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??vt,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new be},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ie}],logger:(e==null?void 0:e.logger)??new fe,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Ae,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ke}),Vt=e=>{const s=Le(e),t=()=>s().then(Te),n=Bt(e);return{...n,...e,runtime:"browser",defaultsMode:s,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??ze,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??De({serviceId:n.serviceId,clientVersion:Lt.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_e,region:(e==null?void 0:e.region)??Fe("Region is missing"),requestHandler:$e.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||He),sha256:(e==null?void 0:e.sha256)??Oe,streamCollector:(e==null?void 0:e.streamCollector)??Ue,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(je)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Ne))}},Jt=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const h=s.findIndex(E=>E.schemeId===o.schemeId);h===-1?s.push(o):s.splice(h,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},Kt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Wt=(e,s)=>{const t=Object.assign(Me(e),Ge(e),qe(e),Jt(e));return s.forEach(n=>n.configure(t)),Object.assign(e,Be(t),Ve(t),Je(t),Kt(t))};class gs extends Ke{constructor(...[t]){const n=Vt(t||{});super(n);i(this,"config");this.initConfig=n;const o=St(n),h=We(o),E=Qe(h),f=Xe(E),v=dt(f),C=Ye(v),pe=gt(C),ue=Wt(pe,(t==null?void 0:t.extensions)||[]);this.config=ue,this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(nt(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(it(this.config,{httpAuthSchemeParametersProvider:wt,identityProviderConfigProvider:async ye=>new at({"aws.auth#sigv4":ye.credentials})})),this.middlewareStack.use(rt(this.config))}destroy(){super.destroy()}}class l extends ct{constructor(s){super(s),Object.setPrototypeOf(this,l.prototype)}}class z extends l{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});i(this,"name","InternalErrorException");i(this,"$fault","server");Object.setPrototypeOf(this,z.prototype)}}class D extends l{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});i(this,"name","InvalidParameterException");i(this,"$fault","client");Object.setPrototypeOf(this,D.prototype)}}class _ extends l{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});i(this,"name","LimitExceededException");i(this,"$fault","client");Object.setPrototypeOf(this,_.prototype)}}class F extends l{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});i(this,"name","NotAuthorizedException");i(this,"$fault","client");Object.setPrototypeOf(this,F.prototype)}}class $ extends l{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});i(this,"name","ResourceConflictException");i(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class H extends l{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});i(this,"name","TooManyRequestsException");i(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class O extends l{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});i(this,"name","ResourceNotFoundException");i(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class U extends l{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});i(this,"name","ExternalServiceException");i(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class j extends l{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});i(this,"name","InvalidIdentityPoolConfigurationException");i(this,"$fault","client");Object.setPrototypeOf(this,j.prototype)}}class N extends l{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});i(this,"name","DeveloperUserAlreadyRegisteredException");i(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class L extends l{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});i(this,"name","ConcurrentModificationException");i(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}const Qt=e=>({...e,...e.Logins&&{Logins:R}}),Xt=e=>({...e,...e.SecretKey&&{SecretKey:R}}),Yt=e=>({...e,...e.Credentials&&{Credentials:Xt(e.Credentials)}}),Zt=e=>({...e,...e.Logins&&{Logins:R}}),es=async(e,s)=>{const t=le("GetCredentialsForIdentity");let n;return n=JSON.stringify(c(e)),ce(s,t,"/",void 0,n)},ts=async(e,s)=>{const t=le("GetId");let n;return n=JSON.stringify(c(e)),ce(s,t,"/",void 0,n)},ss=async(e,s)=>{if(e.statusCode>=300)return de(e,s);const t=await Y(e.body,s);let n={};return n=xs(t),{$metadata:p(e),...n}},ns=async(e,s)=>{if(e.statusCode>=300)return de(e,s);const t=await Y(e.body,s);let n={};return n=c(t),{$metadata:p(e),...n}},de=async(e,s)=>{const t={...e,body:await lt(e.body,s)},n=pt(e,t.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await rs(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await cs(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await ls(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await ps(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await us(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ms(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await ys(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await as(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await ds(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await is(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await os(t);default:const o=t.body;return ws({output:e,parsedBody:o,errorCode:n})}},os=async(e,s)=>{const t=e.body,n=c(t),o=new L({$metadata:p(e),...n});return u(o,t)},is=async(e,s)=>{const t=e.body,n=c(t),o=new N({$metadata:p(e),...n});return u(o,t)},as=async(e,s)=>{const t=e.body,n=c(t),o=new U({$metadata:p(e),...n});return u(o,t)},rs=async(e,s)=>{const t=e.body,n=c(t),o=new z({$metadata:p(e),...n});return u(o,t)},ds=async(e,s)=>{const t=e.body,n=c(t),o=new j({$metadata:p(e),...n});return u(o,t)},cs=async(e,s)=>{const t=e.body,n=c(t),o=new D({$metadata:p(e),...n});return u(o,t)},ls=async(e,s)=>{const t=e.body,n=c(t),o=new _({$metadata:p(e),...n});return u(o,t)},ps=async(e,s)=>{const t=e.body,n=c(t),o=new F({$metadata:p(e),...n});return u(o,t)},us=async(e,s)=>{const t=e.body,n=c(t),o=new $({$metadata:p(e),...n});return u(o,t)},ys=async(e,s)=>{const t=e.body,n=c(t),o=new O({$metadata:p(e),...n});return u(o,t)},ms=async(e,s)=>{const t=e.body,n=c(t),o=new H({$metadata:p(e),...n});return u(o,t)},hs=(e,s)=>Z(e,{AccessKeyId:I,Expiration:t=>mt(ht(xt(t))),SecretKey:I,SessionToken:I}),xs=(e,s)=>Z(e,{Credentials:t=>hs(t),IdentityId:I}),p=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ws=ut(l),ce=async(e,s,t,n,o)=>{const{hostname:h,protocol:E="https",port:f,path:v}=await e.endpoint(),C={protocol:E,hostname:h,port:f,method:"POST",path:v.endsWith("/")?v.slice(0,-1)+t:v+t,headers:s};return o!==void 0&&(C.body=o),new yt(C)};function le(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class Ss extends ee.classBuilder().ep(ne).m(function(s,t,n,o){return[te(n,this.serialize,this.deserialize),se(n,s.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Qt,Yt).ser(es).de(ss).build(){}class Ps extends ee.classBuilder().ep(ne).m(function(s,t,n,o){return[te(n,this.serialize,this.deserialize),se(n,s.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Zt,void 0).ser(ts).de(ns).build(){}export{gs as CognitoIdentityClient,Ss as GetCredentialsForIdentityCommand,Ps as GetIdCommand};
